(this["webpackJsonpgestion-de-proyectos-mintic"]=this["webpackJsonpgestion-de-proyectos-mintic"]||[]).push([[0],{131:function(e,t,c){},132:function(e,t,c){},133:function(e,t,c){"use strict";c.r(t);var n,r,a,s,i,o,l,d,j,b,u,O,x=c(1),f=c.n(x),m=c(40),h=c.n(m),p=c(6),g=c(47),v=c(21),N=Object(x.createContext)(null),y=function(){return Object(x.useContext)(N)},I=Object(x.createContext)(null),E=function(){return Object(x.useContext)(I)},D=c(0),C=function(e){var t=e.roleList,c=e.children,n=E().userData;return t.includes(n.rol)?c:Object(D.jsx)(D.Fragment,{})},S=c.p+"static/media/banner.ef201156.jpeg",A=function(){return Object(D.jsxs)("ul",{className:"mt-5",children:[Object(D.jsx)(k,{to:"",title:"Inicio",icon:"fas fa-home"}),Object(D.jsx)(C,{roleList:["ADMINISTRADOR"],children:Object(D.jsx)(k,{to:"/usuarios",title:"Usuarios",icon:"fas fa-user"})}),Object(D.jsx)(k,{to:"/proyectos",title:"Proyectos",icon:"fas fa-file"}),Object(D.jsx)(C,{roleList:["ADMINISTRADOR","LIDER"],children:Object(D.jsx)(k,{to:"/inscripciones",title:"Aprobacion Inscripciones",icon:"fas fa-user"})}),Object(D.jsx)($,{})]})},$=function(){var e=y().setToken;return Object(D.jsx)("li",{onClick:function(){return console.log("eliminar token"),void e(null)},children:Object(D.jsx)(v.c,{to:"/auth/login",className:"sidebar-route text-red-700",children:Object(D.jsxs)("div",{className:"flex items-center",children:[Object(D.jsx)("i",{className:"fas fa-sign-out-alt"}),Object(D.jsx)("span",{className:"text-sm  ml-2",children:"Cerrar Sesi\xf3n"})]})})})},w=function(){return Object(D.jsxs)("div",{className:"py-3 w-full flex flex-col items-center justify-center",children:[Object(D.jsx)("img",{src:S,alt:"Logo"}),Object(D.jsx)("br",{}),Object(D.jsx)("span",{className:"my-2 font-bold text-center",children:"Administrador de proyectos Misi\xf3n TIC"})]})},_=function(){return Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"sidebar h-full z-40 absolute md:h-full sm:hidden transition duration-150 ease-in-out",id:"mobile-nav",children:Object(D.jsxs)("div",{className:"px-8",children:[Object(D.jsx)(w,{}),Object(D.jsx)(A,{})]})})})},k=function(e){var t=e.to,c=e.title,n=e.icon;return Object(D.jsx)("li",{children:Object(D.jsx)(v.c,{to:t,className:function(e){return e.isActive?"sidebar-route text-white bg-blue-700":"sidebar-route text-gray-900 hover:text-white hover:bg-gray-400"},children:Object(D.jsxs)("div",{className:"flex items-center-left",children:[Object(D.jsx)("i",{className:n}),Object(D.jsx)("span",{className:"text-sm  ml-2",children:c})]})})})},R=function(){var e=Object(x.useState)(!0),t=Object(p.a)(e,2),c=t[0],n=t[1];return Object(D.jsxs)("div",{className:"flex flex-col md:flex-row flex-no-wrap md:h-full",children:[Object(D.jsx)("div",{className:"sidebar hidden md:flex",children:Object(D.jsxs)("div",{className:"px-8",children:[Object(D.jsx)(w,{}),Object(D.jsx)(A,{})]})}),Object(D.jsxs)("div",{className:"flex md:hidden w-full justify-between bg-green-800 p-2 text-white",children:[Object(D.jsx)("i",{className:"fas fa-".concat(c?"times":"bars"),onClick:function(){return n(!c)}}),Object(D.jsx)("i",{className:"fas fa-home"})]}),c&&Object(D.jsx)(_,{})]})},P=c(8),T=c(33),L=c(176),q=c(16),F=c(167),U=Object(F.a)(n||(n=Object(q.a)(["\n  mutation Registro(\n    $nombre: String!\n    $apellido: String!\n    $identificacion: String!\n    $correo: String!\n    $rol: Enum_Rol!\n    $password: String!\n  ) {\n    registro(\n      nombre: $nombre\n      apellido: $apellido\n      identificacion: $identificacion\n      correo: $correo\n      rol: $rol\n      password: $password\n    ) {\n      token\n      error\n    }\n  }\n"]))),M=Object(F.a)(r||(r=Object(q.a)(["\n  mutation Login($correo: String!, $password: String!) {\n    login(correo: $correo, password: $password) {\n      token\n      error\n    }\n  }\n"]))),V=Object(F.a)(a||(a=Object(q.a)(["\n  mutation RefreshToken {\n    refreshToken {\n      token\n      error\n    }\n  }\n"]))),z=(c(121),function(e){var t=e.roleList,c=e.children,n=E().userData;return t.includes(n.rol)?c:Object(D.jsx)("div",{"data-testid":"not-authorized",className:"text-9xl text-red-500 ",children:"No est\xe1s autorizado para ver este sitio."})}),G=function(){var e=Object(P.g)(),t=y(),c=(t.authToken,t.setToken),n=Object(x.useState)(!0),r=Object(p.a)(n,2),a=r[0],s=r[1],i=Object(L.a)(V),o=Object(p.a)(i,2),l=o[0],d=o[1],j=d.data,b=d.loading;d.error;return Object(x.useEffect)((function(){l()}),[l]),Object(x.useEffect)((function(){j&&(j.refreshToken.token?c(j.refreshToken.token):(c(null),e("/auth/login")),s(!1))}),[j,c,a,e]),b||a?Object(D.jsx)("div",{children:"Loading..."}):Object(D.jsxs)("div",{className:"flex flex-col md:flex-row flex-no-wrap h-screen",children:[Object(D.jsx)(R,{}),Object(D.jsx)("div",{className:"flex w-full h-full",children:Object(D.jsx)("div",{className:"w-full h-full  overflow-y-scroll",children:Object(D.jsx)(P.a,{})})}),Object(D.jsx)(T.a,{})]})},B=c(104),J=c(170),Z=c(171),Y=c(166),H=c(103),Q=function(){return Object(D.jsxs)("div",{className:"card mb-12",children:[Object(D.jsx)("img",{className:"card-img-top",src:"https://www.misiontic2022.gov.co/746/propertyvalues-187848_banner.jpg",alt:"Card image cap"}),Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("h1",{className:"card-title",children:"7Trenta Administraor de Proyectos"}),Object(D.jsx)("h3",{className:"card-text",children:"Planificaci\xf3n estrat\xe9gica y ejecuci\xf3n m\xe1s inteligente"}),Object(D.jsx)("p",{className:"card-text",children:Object(D.jsx)("small",{className:"text-muted",children:"Proyecto Misi\xf3n TIC 2021"})})]}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsx)("div",{className:"col-sm-2",children:Object(D.jsx)("div",{className:"card",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{className:"card-img-top",src:"https://cdn.icon-icons.com/icons2/1879/PNG/512/iconfinder-3-avatar-2754579_120516.png",alt:"Card image cap"}),Object(D.jsx)("h5",{className:"card-title d-flex justify-content-center",children:"DANIEL MONTOYA"}),Object(D.jsx)("p",{className:"card-text",children:"Scrum Master"})]})})}),Object(D.jsx)("div",{className:"col-sm-2",children:Object(D.jsx)("div",{className:"card",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{className:"card-img-top",src:"https://cdn-icons-png.flaticon.com/512/194/194938.png",alt:"Card image cap"}),Object(D.jsx)("h5",{className:"card-title d-flex justify-content-center",children:"PAOLA SIERRA"}),Object(D.jsx)("p",{className:"card-text",children:"Analista"})]})})}),Object(D.jsx)("div",{className:"col-sm-2",children:Object(D.jsx)("div",{className:"card",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{className:"card-img-top",src:"https://cdn.icon-icons.com/icons2/1879/PNG/512/iconfinder-3-avatar-2754579_120516.png",alt:"Card image cap"}),Object(D.jsx)("h5",{className:"card-title d-flex justify-content-center",children:"\xc1LVARO COBO"}),Object(D.jsx)("p",{className:"card-text",children:"Desarrollador"})]})})}),Object(D.jsx)("div",{className:"col-sm-2",children:Object(D.jsx)("div",{className:"card",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{className:"card-img-top",src:"https://cdn.icon-icons.com/icons2/1879/PNG/512/iconfinder-3-avatar-2754579_120516.png",alt:"Card image cap"}),Object(D.jsx)("h5",{className:"card-title d-flex justify-content-center",children:"PABLO LEDESMA"}),Object(D.jsx)("p",{className:"card-text",children:"Admin BD"})]})})}),Object(D.jsx)("div",{className:"col-sm-2",children:Object(D.jsx)("div",{className:"card",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{className:"card-img-top",src:"https://cdn.icon-icons.com/icons2/1879/PNG/512/iconfinder-3-avatar-2754579_120516.png",alt:"Card image cap"}),Object(D.jsx)("h5",{className:"card-title d-flex justify-content-center",children:"JHOAN SIERRA"}),Object(D.jsx)("p",{className:"card-text",children:"Product Onwer"})]})})}),Object(D.jsx)("div",{className:"col-sm-2",children:Object(D.jsx)("div",{className:"card",children:Object(D.jsxs)("div",{className:"card-body",children:[Object(D.jsx)("img",{className:"card-img-top",src:"https://cdn.icon-icons.com/icons2/1879/PNG/512/iconfinder-3-avatar-2754579_120516.png",alt:"Card image cap"}),Object(D.jsx)("h5",{className:"card-title d-flex justify-content-center",children:"JOS\xc9 CORREDOR"}),Object(D.jsx)("p",{className:"card-text",children:"Desarrollador"})]})})})]})]})},K=function(){return Object(D.jsx)("div",{children:"Pagina 2"})},W=function(){return Object(D.jsx)("div",{children:"Index Category1"})},X=function(){return Object(D.jsx)("div",{children:"pagina /category/page1"})},ee=c(173),te=Object(F.a)(s||(s=Object(q.a)(["\n  query Query($filtro: FiltroUsuarios) {\n    Usuarios(filtro: $filtro) {\n      _id\n      nombre\n      apellido\n      correo\n      estado\n      identificacion\n      rol\n    }\n  }\n"]))),ce=Object(F.a)(i||(i=Object(q.a)(["\n  query Usuario($_id: String!) {\n    Usuario(_id: $_id) {\n      _id\n      nombre\n      apellido\n      correo\n      estado\n      identificacion\n      rol\n    }\n  }\n"]))),ne={ADMINISTRADOR:"Administrador",ESTUDIANTE:"Estudiante",LIDER:"L\xedder"},re={PENDIENTE:"Pendiente",AUTORIZADO:"Autorizado",NO_AUTORIZADO:"No autorizado"},ae={ACTIVO:"Activo",INACTIVO:"Inactivo"},se={GENERAL:"General",ESPECIFICO:"Espec\xedfico"},ie=function(){var e=Object(ee.a)(te),t=e.data,c=e.error,n=e.loading;return Object(x.useEffect)((function(){c&&T.b.error("Error consultando los usuarios")}),[c]),n?Object(D.jsx)("div",{children:"Cargando...."}):Object(D.jsx)(z,{roleList:["ADMINISTRADOR"],children:Object(D.jsxs)("div",{className:"datos",children:[Object(D.jsx)("span",{className:"my-2 text-xl font-bold text-center",children:"Usuarios registrados"}),Object(D.jsx)("br",{}),Object(D.jsx)("br",{}),Object(D.jsxs)("table",{className:"tabla",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{children:"Identificaci\xf3n"}),Object(D.jsx)("th",{children:"Nombre"}),Object(D.jsx)("th",{children:"Apellidos"}),Object(D.jsx)("th",{children:"Correo"}),Object(D.jsx)("th",{children:"Rol"}),Object(D.jsx)("th",{children:"Estado"}),Object(D.jsx)("th",{children:"Editar"})]})}),Object(D.jsx)("tbody",{children:t&&t.Usuarios?Object(D.jsx)(D.Fragment,{children:t.Usuarios.map((function(e){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:e.identificacion}),Object(D.jsx)("td",{children:e.nombre}),Object(D.jsx)("td",{children:e.apellido}),Object(D.jsx)("td",{children:e.correo}),Object(D.jsx)("td",{children:ne[e.rol]}),Object(D.jsx)("td",{children:re[e.estado]}),Object(D.jsx)("td",{children:Object(D.jsx)(v.b,{to:"/usuarios/editar/".concat(e._id),children:Object(D.jsx)("i",{className:"fas fa-pen text-blue-600 hover:text-gray-400 cursor-pointer"})})})]},e._id)}))}):Object(D.jsx)("div",{children:"No autorizado"})})]})]})})},oe=function(e){var t=e.label,c=e.name,n=e.defaultValue,r=e.type,a=e.required;return Object(D.jsxs)("label",{htmlFor:c,className:"flex flex-col my-3",children:[Object(D.jsx)("span",{children:t}),Object(D.jsx)("input",{required:a,type:r,name:c,className:"input",defaultValue:n})]})},le=c(100),de=c.n(le),je=function(e){var t=e.disabled,c=e.loading,n=e.text,r=e.onClick,a=void 0===r?function(){}:r;return Object(D.jsx)("button",{"data-testid":"button-loading",onClick:a,disabled:t,type:"submit",className:"btn btn-outline-primary",children:c?Object(D.jsx)(de.a,{"data-testid":"loading-in-button",type:"spin",height:30,width:30}):n})},be=c(9),ue=function(e){var t=Object(x.useRef)(e),c=Object(x.useState)({}),n=Object(p.a)(c,2),r=n[0],a=n[1];return{form:t,formData:r,updateFormData:function(){a(function(){var e=new FormData(t.current),c={};return e.forEach((function(e,t){if(t.includes("nested")){var n=t.split("||"),r=Object(p.a)(n,4),a=(r[0],r[1]),s=r[2],i=r[3];Object.keys(c).includes(a)?Object.keys(c[a]).includes(s)?c[a][s][i]=e:c[a][s]=Object(be.a)({},i,e):c[a]=Object(be.a)({},s,Object(be.a)({},i,e))}else c[t]=e})),console.log(c),c}())}}},Oe=Object(F.a)(o||(o=Object(q.a)(["\n  mutation EditarUsuario(\n    $_id: String!\n    $nombre: String!\n    $apellido: String!\n    $identificacion: String!\n    $correo: String!\n    $estado: Enum_EstadoUsuario!\n  ) {\n    editarUsuario(\n      _id: $_id\n      nombre: $nombre\n      apellido: $apellido\n      identificacion: $identificacion\n      correo: $correo\n      estado: $estado\n    ) {\n      _id\n      nombre\n      apellido\n      correo\n      estado\n      identificacion\n      rol\n    }\n  }\n"]))),xe=c(17),fe=c(78),me=function(e){var t=e.label,c=e.name,n=e.defaultValue,r=void 0===n?"":n,a=e.required,s=e.options,i=Object(x.useState)(r),o=Object(p.a)(i,2),l=o[0],d=o[1],j=[["","Seleccione una opci\xf3n",!0]].concat(Object(xe.a)(Object.entries(s)));return Object(x.useEffect)((function(){d(r)}),[r]),Object(D.jsxs)("label",{htmlFor:c,className:"flex flex-col my-3",children:[Object(D.jsx)("span",{children:t}),Object(D.jsx)("select",{required:a,name:c,className:"input",value:l,onChange:function(e){return d(e.target.value)},children:j.map((function(e){var t;return Object(D.jsx)("option",{value:e[0],disabled:null!==(t=e[2])&&void 0!==t&&t,children:e[1]},Object(fe.a)())}))})]})},he=function(){var e=ue(null),t=e.form,c=e.formData,n=e.updateFormData,r=Object(P.h)()._id,a=Object(ee.a)(ce,{variables:{_id:r}}),s=a.data,i=a.error,o=a.loading,l=Object(L.a)(Oe),d=Object(p.a)(l,2),j=d[0],b=d[1],u=b.data,O=b.loading,f=b.error;return Object(x.useEffect)((function(){u&&T.b.success("Usuario modificado correctamente")}),[u]),Object(x.useEffect)((function(){f&&T.b.error("Error modificando el usuario"),i&&T.b.error("Error consultando el usuario")}),[i,f]),o?Object(D.jsx)("div",{children:"Cargando...."}):Object(D.jsxs)("div",{className:"flew flex-col w-full h-full items-center justify-center p-10",children:[Object(D.jsx)(v.b,{to:"/usuarios",children:Object(D.jsx)("i",{className:"fas fa-arrow-left text-gray-600 cursor-pointer font-bold text-xl hover:text-gray-900"})}),Object(D.jsx)("h1",{className:"text-2xl text-gray-800 font-bold text-center",children:"Editar Usuario"}),Object(D.jsxs)("form",{onSubmit:function(e){e.preventDefault(),delete c.rol,j({variables:Object(g.a)({_id:r},c)})},onChange:n,ref:t,className:"editarusuario",children:[Object(D.jsx)(oe,{label:"Nombre:",type:"text",name:"nombre",defaultValue:s.Usuario.nombre,required:!0}),Object(D.jsx)(oe,{label:"Apellido:",type:"text",name:"apellido",defaultValue:s.Usuario.apellido,required:!0}),Object(D.jsx)(oe,{label:"Correo:",type:"email",name:"correo",defaultValue:s.Usuario.correo,required:!0}),Object(D.jsx)(oe,{label:"Identificaci\xf3n:",type:"text",name:"identificacion",defaultValue:s.Usuario.identificacion,required:!0}),Object(D.jsx)(me,{label:"Estado:",name:"estado",defaultValue:s.Usuario.estado,required:!0,options:re}),Object(D.jsxs)("span",{children:["Rol del usuario: ",s.Usuario.rol]}),Object(D.jsx)(je,{disabled:0===Object.keys(c).length,loading:O,text:"Confirmar"})]})]})},pe=function(){return Object(D.jsx)("div",{className:"flex flex-col md:flex-row flex-no-wrap h-screen",children:Object(D.jsx)("div",{className:"flex w-full h-full",children:Object(D.jsx)("div",{className:"w-full h-full  overflow-y-scroll",children:Object(D.jsx)(P.a,{})})})})},ge=c.p+"static/media/logo7.0412c84f.svg",ve=function(){var e=y().setToken,t=Object(P.g)(),c=ue(),n=c.form,r=c.formData,a=c.updateFormData,s=Object(L.a)(U),i=Object(p.a)(s,2),o=i[0],l=i[1],d=l.data;l.loading,l.error;return Object(x.useEffect)((function(){d&&d.registro.token&&(e(d.registro.token),t("/"))}),[d,e,t]),Object(D.jsxs)("div",{className:"wrappers",children:[Object(D.jsx)("h1",{className:"text-xl font-bold my-4",children:"Reg\xedstrate"}),Object(D.jsxs)("form",{className:"flex flex-col",onSubmit:function(e){e.preventDefault(),o({variables:r})},onChange:a,ref:n,children:[Object(D.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[Object(D.jsx)(oe,{label:"Nombre:",name:"nombre",type:"text",required:!0}),Object(D.jsx)(oe,{label:"Apellido:",name:"apellido",type:"text",required:!0}),Object(D.jsx)(oe,{label:"Documento:",name:"identificacion",type:"text",required:!0}),Object(D.jsx)(me,{label:"Rol deseado:",name:"rol",required:!0,options:ne}),Object(D.jsx)(oe,{label:"Correo:",name:"correo",type:"email",required:!0}),Object(D.jsx)(oe,{label:"Contrase\xf1a:",name:"password",type:"password",required:!0})]}),Object(D.jsx)(je,{disabled:0===Object.keys(r).length,loading:!1,text:"Registrarme"})]}),Object(D.jsx)("span",{children:"\xbfYa tienes una cuenta?"}),Object(D.jsx)(v.b,{to:"/auth/login",children:Object(D.jsx)("span",{className:"text-blue-700",children:"Iniciar sesi\xf3n"})})]})},Ne=function(){var e=Object(P.g)(),t=y().setToken,c=ue(),n=c.form,r=c.formData,a=c.updateFormData,s=Object(L.a)(M),i=Object(p.a)(s,2),o=i[0],l=i[1],d=l.data,j=l.loading;l.error;return Object(x.useEffect)((function(){d&&d.login.token&&(t(d.login.token),e("/"))}),[d,t,e]),Object(D.jsxs)("div",{className:"wrapper",children:[Object(D.jsx)("img",{src:ge,alt:""}),Object(D.jsx)("h1",{className:"text-xl font-bold text-gray-900 ",children:"Iniciar sesi\xf3n"}),Object(D.jsxs)("form",{className:"flex flex-col",onSubmit:function(e){e.preventDefault(),o({variables:r})},onChange:a,ref:n,children:[Object(D.jsx)(oe,{name:"correo",type:"email",label:"Correo",required:!0}),Object(D.jsx)(oe,{name:"password",type:"password",label:"Contrase\xf1a",required:!0}),Object(D.jsx)(je,{className:"btn btn-primary",disabled:0===Object.keys(r).length,loading:j,text:"Iniciar Sesi\xf3n"})]}),Object(D.jsx)("span",{children:"\xbfDeseas registrarte? "}),Object(D.jsxs)(v.b,{to:"/auth/register",children:[Object(D.jsx)("br",{}),Object(D.jsx)("span",{className:"text-blue-700",children:"Registrar"})]})]})},ye=Object(F.a)(l||(l=Object(q.a)(["\n  query Proyectos {\n    Proyectos {\n      _id\n      nombre\n      estado\n      objetivos {\n        descripcion\n        tipo\n      }\n      lider {\n        _id\n        correo\n        nombre\n      }\n      inscripciones {\n        estado\n        estudiante {\n          _id\n        }\n      }\n    }\n  }\n"]))),Ie=c(168),Ee=Object(F.a)(d||(d=Object(q.a)(["\n  mutation Mutation($_id: String!, $campos: camposProyecto!) {\n    editarProyecto(_id: $_id, campos: $campos) {\n      _id\n      estado\n    }\n  }\n"]))),De=Object(F.a)(j||(j=Object(q.a)(["\n  mutation CrearProyecto(\n    $nombre: String!\n    $presupuesto: Float!\n    $fechaInicio: Date!\n    $fechaFin: Date!\n    $lider: String!\n    $objetivos: [crearObjetivo]\n  ) {\n    crearProyecto(\n      nombre: $nombre\n      presupuesto: $presupuesto\n      fechaInicio: $fechaInicio\n      fechaFin: $fechaFin\n      lider: $lider\n      objetivos: $objetivos\n    ) {\n      _id\n    }\n  }\n"]))),Ce=Object(F.a)(b||(b=Object(q.a)(["\n  mutation Mutation($proyecto: String!, $estudiante: String!) {\n    crearInscripcion(proyecto: $proyecto, estudiante: $estudiante) {\n      _id\n    }\n  }\n"]))),Se=Object(F.a)(u||(u=Object(q.a)(["\n  mutation AprobarInscripcion($aprobarInscripcionId: String!) {\n    aprobarInscripcion(id: $aprobarInscripcionId) {\n      _id\n    }\n  }\n"]))),Ae=c(172),$e=c(169),we=c(178),_e=c(14),ke=Object(_e.a)((function(e){return Object(D.jsx)(Ae.a,Object(g.a)({},e))}))((function(e){e.theme;return{backgroundColor:"#143d99"}})),Re=Object(_e.a)((function(e){return Object(D.jsx)($e.a,Object(g.a)({},e))}))((function(e){e.theme;return{backgroundColor:"#143d99"}})),Pe=Object(_e.a)((function(e){return Object(D.jsx)(we.a,Object(g.a)({},e))}))((function(e){e.theme;return{backgroundColor:"#f9f9f9"}})),Te=function(e){var t=e.proyecto,c=Object(x.useState)(!1),n=Object(p.a)(c,2),r=n[0],a=n[1];return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)(ke,{children:[Object(D.jsx)(Re,{expandIcon:Object(D.jsx)("i",{className:"fas fa-chevron-down"}),children:Object(D.jsx)("div",{className:"flex w-full justify-between",children:Object(D.jsx)("div",{className:"uppercase font-bold text-gray-100",children:Object(D.jsxs)("span",{children:[" ",t.nombre," - ",t.estado]})})})}),Object(D.jsxs)(Pe,{children:[Object(D.jsxs)(C,{roleList:["ADMINISTRADOR"],children:["Modificar Estado",Object(D.jsx)("i",{className:"mx-4 fas fa-pen text-blue-600 hover:text-gray-400",onClick:function(){a(!0)}})]}),Object(D.jsx)(C,{roleList:["ESTUDIANTE"],children:Object(D.jsx)(Fe,{idProyecto:t._id,estado:t.estado,inscripciones:t.inscripciones})}),Object(D.jsxs)("div",{children:["Lider del proyecto: ",t.lider.nombre]}),Object(D.jsx)("div",{className:"flex",children:t.objetivos.map((function(e){return Object(D.jsx)(qe,{tipo:e.tipo,descripcion:e.descripcion})}))})]})]}),Object(D.jsx)(Ie.a,{open:r,onClose:function(){a(!1)},children:Object(D.jsx)(Le,{_id:t._id})})]})},Le=function(e){var t=e._id,c=ue(),n=c.form,r=c.formData,a=c.updateFormData,s=Object(L.a)(Ee),i=Object(p.a)(s,2),o=i[0],l=i[1],d=l.data,j=l.loading;l.error;return Object(x.useEffect)((function(){console.log("data mutation",d)}),[d]),Object(D.jsxs)("div",{className:"p-4",children:[Object(D.jsx)("h1",{className:"font-bold",children:"Modificar Estado del Proyecto"}),Object(D.jsxs)("form",{ref:n,onChange:a,onSubmit:function(e){e.preventDefault(),o({variables:{_id:t,campos:r}})},className:"flex flex-col items-center",children:[Object(D.jsx)(me,{label:"Estado del Proyecto",name:"estado",options:ae}),Object(D.jsx)(je,{disabled:!1,loading:j,text:"Confirmar"})]})]})},qe=function(e){var t=e.tipo,c=e.descripcion;return Object(D.jsxs)("div",{className:"mx-5 my-4 bg-gray-50 p-8 rounded-lg flex flex-col items-center justify-center shadow-xl",children:[Object(D.jsx)("div",{className:"text-lg font-bold",children:t}),Object(D.jsx)("div",{children:c}),Object(D.jsx)(C,{roleList:["ADMINISTRADOR"],children:Object(D.jsx)("div",{children:"Editar"})})]})},Fe=function(e){var t=e.idProyecto,c=e.estado,n=e.inscripciones,r=Object(x.useState)(""),a=Object(p.a)(r,2),s=a[0],i=a[1],o=Object(L.a)(Ce),l=Object(p.a)(o,2),d=l[0],j=l[1],b=j.data,u=j.loading,O=(j.error,E().userData);Object(x.useEffect)((function(){if(O&&n){var e=n.filter((function(e){return e.estudiante._id===O._id}));e.length>0&&i(e[0].estado)}}),[O,n]),Object(x.useEffect)((function(){b&&(console.log(b),T.b.success("inscripcion creada con exito"))}),[b]);return Object(D.jsx)(D.Fragment,{children:""!==s?Object(D.jsxs)("span",{children:["Ya estas inscrito en este proyecto y el estado es ",s]}):Object(D.jsx)(je,{onClick:function(){d({variables:{proyecto:t,estudiante:O._id}})},disabled:"INACTIVO"===c,loading:u,text:"Inscribirme en este proyecto"})})},Ue=function(){var e=Object(ee.a)(ye),t=e.data,c=e.loading;e.error;return Object(x.useEffect)((function(){console.log("datos proyecto",t)}),[t]),c?Object(D.jsx)("div",{children:"Cargando..."}):t.Proyectos?Object(D.jsxs)("div",{className:"p-10 flex flex-col",children:[Object(D.jsx)("div",{className:"flex w-full items-center justify-center",children:Object(D.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Lista de Proyectos"})}),Object(D.jsx)(C,{roleList:["ADMINISTRADOR","LIDER"],children:Object(D.jsx)("div",{className:"my-2 self-end",children:Object(D.jsx)(v.b,{to:"/proyectos/nuevo",className:"btn",children:"Crear nuevo proyecto"})})}),t.Proyectos.map((function(e){return Object(D.jsx)(Te,{proyecto:e})}))]}):Object(D.jsx)(D.Fragment,{})},Me=c(102),Ve=(c(131),c(132),Object(x.createContext)(null)),ze=function(){var e=Object(x.useState)([]),t=Object(p.a)(e,2),c=t[0],n=t[1],r=Object(x.useState)(!1),a=Object(p.a)(r,2),s=a[0],i=a[1],o=function(){var e=Object(fe.a)();return Object(D.jsx)(Ge,{id:e},e)};return Object(x.useEffect)((function(){c.length>4?i(!0):i(!1)}),[c]),Object(D.jsx)(Ve.Provider,{value:{eliminarObjetivo:function(e){n(c.filter((function(t){return t.props.id!==e})))}},children:Object(D.jsxs)("div",{children:[Object(D.jsx)("span",{children:"Objetivos del Proyecto"}),!s&&Object(D.jsx)("i",{onClick:function(){return n([].concat(Object(xe.a)(c),[o()]))},className:"fas fa-plus rounded-full bg-green-500 hover:bg-green-400 text-white p-2 mx-2 cursor-pointer"}),c.map((function(e){return e}))]})})},Ge=function(e){var t=e.id,c=Object(x.useContext)(Ve).eliminarObjetivo;return Object(D.jsxs)("div",{className:"flex items-center",children:[Object(D.jsx)(oe,{name:"nested||objetivos||".concat(t,"||descripcion"),label:"Descripci\xf3n",type:"textarea",required:!0}),Object(D.jsx)(me,{name:"nested||objetivos||".concat(t,"||tipo"),options:se,label:"Tipo de Objetivo",required:!0}),Object(D.jsx)("i",{onClick:function(){return c(t)},className:"fas fa-minus rounded-full bg-red-500 hover:bg-red-400 text-white p-2 mx-2 cursor-pointer mt-6"})]})},Be=function(){var e=ue(),t=e.form,c=e.formData,n=e.updateFormData,r=Object(x.useState)({}),a=Object(p.a)(r,2),s=a[0],i=a[1],o=Object(ee.a)(te,{variables:{filtro:{rol:"LIDER",estado:"AUTORIZADO"}}}),l=o.data,d=o.loading,j=(o.error,Object(L.a)(De)),b=Object(p.a)(j,2),u=b[0],O=b[1],f=O.data;O.loading,O.error;Object(x.useEffect)((function(){if(console.log(l),l){var e={};l.Usuarios.forEach((function(t){e[t._id]=t.correo})),i(e),console.log(e)}}),[l]),Object(x.useEffect)((function(){console.log("data mutation",f)}));return d?Object(D.jsx)("div",{children:"...Cargando"}):Object(D.jsxs)("div",{className:"editarusuario",children:[Object(D.jsx)("div",{className:"self-start",children:Object(D.jsx)(v.b,{to:"/proyectos",children:Object(D.jsx)("i",{className:"fas fa-arrow-left"})})}),Object(D.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Crear Nuevo Proyecto"}),Object(D.jsxs)("form",{ref:t,onChange:n,onSubmit:function(e){e.preventDefault(),c.objetivos=Object.values(c.objetivos),c.presupuesto=parseFloat(c.presupuesto),u({variables:c})},children:[Object(D.jsx)(oe,{name:"nombre",label:"Nombre del Proyecto",required:!0,type:"text"}),Object(D.jsx)(oe,{name:"presupuesto",label:"Presupuesto",required:!0,type:"number"}),Object(D.jsx)(oe,{name:"fechaInicio",label:"Fecha de Inicio",required:!0,type:"date"}),Object(D.jsx)(oe,{name:"fechaFin",label:"Fecha de Fin",required:!0,type:"date"}),Object(D.jsx)(me,{label:"L\xedder",options:s,name:"lider",required:!0}),Object(D.jsx)(ze,{}),Object(D.jsx)("br",{}),Object(D.jsx)(je,{text:"Crear Proyecto",loading:!1,disabled:!1})]})]})},Je=Object(F.a)(O||(O=Object(q.a)(["\n  query Inscripciones {\n    Inscripciones {\n      _id\n      estado\n      estudiante {\n        _id\n      }\n    }\n  }\n"]))),Ze=function(e){var t=e.data,c=e.titulo,n=e.refetch,r=void 0===n?function(){}:n;return Object(D.jsxs)(ke,{children:[Object(D.jsxs)(Re,{children:[c," (",t.length,")"]}),Object(D.jsx)(Pe,{children:Object(D.jsx)("div",{className:"flex",children:t&&t.map((function(e){return Object(D.jsx)(Ye,{inscripcion:e,refetch:r})}))})})]})},Ye=function(e){var t=e.inscripcion,c=e.refetch,n=Object(L.a)(Se),r=Object(p.a)(n,2),a=r[0],s=r[1],i=s.data,o=s.loading,l=s.error;Object(x.useEffect)((function(){i&&(T.b.success("Inscripcion aprobada con exito"),c())}),[i]),Object(x.useEffect)((function(){l&&T.b.error("Error aprobando la inscripcion")}),[l]);return Object(D.jsxs)("div",{className:"bg-gray-900 text-gray-50 flex flex-col p-6 m-2 rounded-lg shadow-xl",children:[Object(D.jsx)("span",{children:t.estudiante._id}),Object(D.jsx)("span",{children:t.estado}),"PENDIENTE"===t.estado&&Object(D.jsx)(je,{onClick:function(){a({variables:{aprobarInscripcionId:t._id}})},text:"Aprobar Inscripcion",loading:o,disabled:!1})]})},He=function(){var e=Object(ee.a)(Je),t=e.data,c=e.loading,n=(e.error,e.refetch);return Object(x.useEffect)((function(){console.log(t)}),[t]),c?Object(D.jsx)("div",{children:"Loading..."}):Object(D.jsx)(z,{roleList:["ADMINISTRADOR","LIDER"],children:Object(D.jsxs)("div",{className:"p-10",children:[Object(D.jsx)("div",{children:"Pagina de inscripciones"}),Object(D.jsxs)("div",{className:"my-4",children:[Object(D.jsx)(Ze,{titulo:"Inscripciones aprobadas",data:t.Inscripciones.filter((function(e){return"ACEPTADO"===e.estado}))}),Object(D.jsx)(Ze,{titulo:"Inscripciones pendientes",data:t.Inscripciones.filter((function(e){return"PENDIENTE"===e.estado})),refetch:n}),Object(D.jsx)(Ze,{titulo:"Inscripciones rechazadas",data:t.Inscripciones.filter((function(e){return"RECHAZADO"===e.estado}))})]})]})})},Qe=Object(B.a)({uri:"http://pablobk.ydns.eu:4000/graphql"}),Ke=Object(H.a)((function(e,t){var c=t.headers,n=JSON.parse(localStorage.getItem("token"));return{headers:Object(g.a)(Object(g.a)({},c),{},{authorization:n?"Bearer ".concat(n):""})}})),We=new J.a({cache:new Z.a,link:Ke.concat(Qe)});var Xe=function(){var e=Object(x.useState)({}),t=Object(p.a)(e,2),c=t[0],n=t[1],r=Object(x.useState)(""),a=Object(p.a)(r,2),s=a[0],i=a[1];return Object(x.useEffect)((function(){if(s){var e=Object(Me.a)(s);n({_id:e._id,nombre:e.nombre,apellido:e.apellido,identificacion:e.identificacion,correo:e.correo,rol:e.rol})}}),[s]),Object(D.jsx)(Y.a,{client:We,children:Object(D.jsx)(N.Provider,{value:{authToken:s,setAuthToken:i,setToken:function(e){console.log("set token",e),i(e),e?localStorage.setItem("token",JSON.stringify(e)):localStorage.removeItem("token")}},children:Object(D.jsx)(I.Provider,{value:{userData:c,setUserData:n},children:Object(D.jsx)(v.a,{children:Object(D.jsxs)(P.d,{children:[Object(D.jsxs)(P.b,{path:"/",element:Object(D.jsx)(G,{}),children:[Object(D.jsx)(P.b,{path:"",element:Object(D.jsx)(Q,{})}),Object(D.jsx)(P.b,{path:"/usuarios",element:Object(D.jsx)(ie,{})}),Object(D.jsx)(P.b,{path:"/usuarios/editar/:_id",element:Object(D.jsx)(he,{})}),Object(D.jsx)(P.b,{path:"/proyectos",element:Object(D.jsx)(Ue,{})}),Object(D.jsx)(P.b,{path:"/proyectos/nuevo",element:Object(D.jsx)(Be,{})}),Object(D.jsx)(P.b,{path:"/inscripciones",element:Object(D.jsx)(He,{})}),Object(D.jsx)(P.b,{path:"page2",element:Object(D.jsx)(K,{})}),Object(D.jsx)(P.b,{path:"category1",element:Object(D.jsx)(W,{})}),Object(D.jsx)(P.b,{path:"category1/page1",element:Object(D.jsx)(X,{})})]}),Object(D.jsxs)(P.b,{path:"/auth",element:Object(D.jsx)(pe,{}),children:[Object(D.jsx)(P.b,{path:"register",element:Object(D.jsx)(ve,{})}),Object(D.jsx)(P.b,{path:"login",element:Object(D.jsx)(Ne,{})})]})]})})})})})},et=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,180)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};h.a.render(Object(D.jsx)(f.a.StrictMode,{children:Object(D.jsx)(Xe,{})}),document.getElementById("root")),et()}},[[133,1,2]]]);
//# sourceMappingURL=main.8a444504.chunk.js.map